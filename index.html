function createCard(faq) {
  // Ensure problem and solution fields exist before processing
  if (!faq.problem || !faq.solution) {
    return '';  // Skip rendering this card if either field is missing
  }

  const maxLength = 100; // Maximum length for the short solution
  const isLongSolution = faq.solution.length > maxLength;
  const truncatedSolution = faq.solution.slice(0, maxLength) + '...';

  // Replace newline characters with <br> for proper HTML rendering
  const formattedSolution = faq.solution.replace(/\n/g, '<br>');

  // Convert YouTube URL to embed format
  let embedVideoUrl = '';
  if (faq.video && faq.video.includes('youtube.com/watch')) {
    const videoId = faq.video.split('v=')[1];  // Extract the video ID from the URL
    embedVideoUrl = `https://www.youtube.com/embed/${videoId}`;  // Create the embed URL
  }

  // Conditionally add video icon next to "Read More"
  const videoIcon = faq.video ? ' ðŸŽ¥' : '';  // Add icon if video exists
  const externalLink = faq.link ? `<a href="${faq.link}" target="_blank" class="external-link">View More</a>` : '';  // External link button

  return `
    <div class="faq-card" ${isLongSolution ? 'onclick="toggleSolution(this)"' : ''}>
      <div class="faq-problem">${faq.problem}</div>
      <div class="faq-solution ${isLongSolution ? 'truncated-solution' : ''}">
        ${isLongSolution ? truncatedSolution.replace(/\n/g, '<br>') : formattedSolution}
      </div>
      ${isLongSolution ? `<span class="expand-btn">Read More${videoIcon}</span>` : ''}
      <div class="full-solution" style="display: none;">
        ${formattedSolution}
        <!-- Video Embed (Shown only when solution is expanded) -->
        ${embedVideoUrl ? `<div class="faq-video">
          <iframe width="100%" height="315" src="${embedVideoUrl}" frameborder="0" allowfullscreen></iframe>
        </div>` : ''}
        <!-- External Link (optional) -->
        ${externalLink}
      </div>
    </div>
  `;
}
